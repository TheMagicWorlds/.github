name: New Task Assignment Reminder

on:
  issues:
    types: [assigned]

# Grant the GITHUB_TOKEN permission to write to issues (required to post comments)
permissions:
  issues: write

jobs:
  post-reminder-comment:
    runs-on: ubuntu-latest
    # compute a best-effort assignee and expose as env for steps
    env:
      ASSIGNEE: ${{ github.event.assignee.login || github.event.issue.assignee.login || github.actor }}
    steps:
      - name: Dump event payload for debugging
        run: |
          echo "=== GITHUB_EVENT_PATH ==="
          cat "$GITHUB_EVENT_PATH"
          echo "=== end event payload ==="
      - name: Show computed assignee
        run: |
          echo "Computed ASSIGNEE: $ASSIGNEE"
      # Only attempt to post if we have an assignee
      - name: Post Workflow Reminder Comment
        if: ${{ env.ASSIGNEE != '' && env.ASSIGNEE != null }}
        uses: peter-evans/create-or-update-comment@v4
        with:
          issue-number: ${{ github.event.issue.number }}
          body: |
            Hi @${{ env.ASSIGNEE }}, welcome to the task!

            As a reminder, here is our rapid development workflow for every task:
            > **USE AI: 30 MINS PER DAY**
            > 1.  **FOCUS DAY:** Understand the goal.
            > 2.  **BRAINSTORM:** Use AI to explore solutions.
            > 3.  **SELECT:** Select a task or world to improve
            > 4.  **POC PROTOTYPE:** Build a quick proof-of-concept.
            > 5.  **TEST:** Get user feedback.
            > 6.  **DEMO:** Present results to stakeholders.
            > 7.  **PUSH LIVE, GET REWARD & REPLAN:** Ship it and plan the next iteration.

            Let's make some magic!
